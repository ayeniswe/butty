<ul class="budget-list__items budget-list__items--scroll" hx-on="click:
    const btn = this.querySelector('.transaction-create__button');
    const form = this.querySelector('.transaction-create');

    if (form.classList.contains('is-active')) {
      form.classList.remove('is-active');
      btn.classList.add('is-active');
    }
  ">
  <li>
    <button type="button" class="transaction-create__button is-active pill pill--ghost" hx-on="click:
          event.stopPropagation();
          const form = this.nextElementSibling;
          this.classList.remove('is-active');
          form.classList.add('is-active');
        ">
      <span class="pill__content">
        <svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
          <path d="M12 5v14M5 12h14" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
        </svg>
        New Transaction
      </span>
    </button>
    <div class="transaction-create">
      <form hx-on="click:event.stopPropagation()">
        <input type="text" name="name" placeholder="Description" required />
        <select name="account_id" required>
          <option value="" disabled selected>
            Account
          </option>
          {% for account in accounts %}
          <option value="{{ account.id }}">
            {{ account.name }}
          </option>
          {% endfor %}
        </select>

        <input type="text" name="amount" inputmode="decimal" placeholder="Amount" required />

        <input type="date" name="date" value="{{ today }}" min="{{ month_start }}" max="{{ month_end }}" required />

        <button type="submit" class="pill pill--primary">
          Add
        </button>
      </form>
    </div>
  </li>
  {% for item in transactions %}
  <li class="budget-transaction budget-transaction--card" hx-on="click:
      const note = this.nextElementSibling;
      const isOpen = note.classList.contains('is-active');

      document.querySelectorAll('.budget-transaction-note.is-active')
        .forEach(el => el.classList.remove('is-active'));

      if (!isOpen) {
        note.classList.add('is-active');
      }
    ">
    <div>
      <h4 class="budget-transaction__name">
        <svg class="note-indicator {% if item.note %}is-active{% endif %}" aria-hidden="true"></svg>
        {{ item.name }}
      </h4>
      {{ item.account }}
    </div>
    <div class="budget-transaction__meta">
      <div class="budget-transaction__amount">
        <h4>$ {{ item.amount }}</h4>
        <span>{{ item.date }}</span>
      </div>
      <button class="budget-transaction-delete icon-button icon-button--danger" hx-on="click:event.stopPropagation()"
        aria-label="Delete transaction">
        <svg class="icon icon--medium" viewBox="0 0 24 24" aria-hidden="true">
          <path d="M3 6h18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
          <path d="M8 6V4h8v2" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
          <path d="M6 6l1 14h10l1-14" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
            stroke-linejoin="round" />
          <path d="M10 11v6M14 11v6" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
        </svg>
      </button>
    </div>

  </li>
  <div class="budget-transaction-note">
    <textarea placeholder="Enter a note">{{ item.note }}</textarea>
  </div>

  {% endfor %}
</ul>